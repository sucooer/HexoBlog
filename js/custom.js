var CURSOR;Math.lerp=(e,t,o)=>(1-o)*e+o*t;const getStyle=(e,t)=>{try{return window.getComputedStyle?window.getComputedStyle(e)[t]:e.currentStyle[t]}catch(e){}return""};class Cursor{constructor(){this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}move(e,t){this.cursor.style.left=`${e}px`,this.cursor.style.top=`${t}px`}create(){this.cursor||(this.cursor=document.createElement("div"),this.cursor.id="cursor",this.cursor.classList.add("hidden"),document.body.append(this.cursor));var e=document.getElementsByTagName("*");for(let t=0;t<e.length;t++)"pointer"==getStyle(e[t],"cursor")&&this.pt.push(e[t].outerHTML);document.body.appendChild(this.scr=document.createElement("style")),this.scr.innerHTML="* {cursor: url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' opacity='1.5' fill='rgb(57, 197, 187)'/></svg>\") 4 4, auto}"}refresh(){this.scr.remove(),this.cursor.classList.remove("hover"),this.cursor.classList.remove("active"),this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}init(){document.onmouseover=e=>this.pt.includes(e.target.outerHTML)&&this.cursor.classList.add("hover"),document.onmouseout=e=>this.pt.includes(e.target.outerHTML)&&this.cursor.classList.remove("hover"),document.onmousemove=e=>{null==this.pos.curr&&this.move(e.clientX-8,e.clientY-8),this.pos.curr={x:e.clientX-8,y:e.clientY-8},this.cursor.classList.remove("hidden")},document.onmouseenter=e=>this.cursor.classList.remove("hidden"),document.onmouseleave=e=>this.cursor.classList.add("hidden"),document.onmousedown=e=>this.cursor.classList.add("active"),document.onmouseup=e=>this.cursor.classList.remove("active")}render(){this.pos.prev?(this.pos.prev.x=Math.lerp(this.pos.prev.x,this.pos.curr.x,.15),this.pos.prev.y=Math.lerp(this.pos.prev.y,this.pos.curr.y,.15),this.move(this.pos.prev.x,this.pos.prev.y)):this.pos.prev=this.pos.curr,requestAnimationFrame((()=>this.render()))}}function switchNightMode(){document.querySelector("body").insertAdjacentHTML("beforeend",'<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"><div id="sun"></div><div id="moon"></div></div></div>'),setTimeout((function(){document.querySelector("body").classList.contains("DarkMode")?(document.querySelector("body").classList.remove("DarkMode"),localStorage.setItem("isDark","0"),document.getElementById("modeicon").setAttribute("xlink:href","#icon-moon")):(document.querySelector("body").classList.add("DarkMode"),localStorage.setItem("isDark","1"),document.getElementById("modeicon").setAttribute("xlink:href","#icon-sun")),setTimeout((function(){document.getElementsByClassName("Cuteen_DarkSky")[0].style.transition="opacity 3s",document.getElementsByClassName("Cuteen_DarkSky")[0].style.opacity="0",setTimeout((function(){document.getElementsByClassName("Cuteen_DarkSky")[0].remove()}),1e3)}),2e3)}));"light"===("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(document.getElementById("sun").style.opacity="1",document.getElementById("moon").style.opacity="0",setTimeout((function(){document.getElementById("sun").style.opacity="0",document.getElementById("moon").style.opacity="1"}),1e3),activateDarkMode(),saveToLocal.set("theme","dark",2),document.getElementById("modeicon").setAttribute("xlink:href","#icon-sun"),setTimeout((()=>{new Vue({data:function(){this.$notify({title:"关灯啦🌙",message:"当前已成功切换至夜间模式！",position:"top-left",offset:50,showClose:!0,type:"success",duration:5e3})}})}),2e3)):(document.getElementById("sun").style.opacity="0",document.getElementById("moon").style.opacity="1",setTimeout((function(){document.getElementById("sun").style.opacity="1",document.getElementById("moon").style.opacity="0"}),1e3),activateLightMode(),saveToLocal.set("theme","light",2),document.querySelector("body").classList.add("DarkMode"),document.getElementById("modeicon").setAttribute("xlink:href","#icon-moon"),setTimeout((()=>{new Vue({data:function(){this.$notify({title:"开灯啦🌞",message:"当前已成功切换至白天模式！",position:"top-left",offset:50,showClose:!0,type:"success",duration:5e3})}})}),2e3)),"function"==typeof utterancesTheme&&utterancesTheme(),"object"==typeof FB&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout((()=>window.disqusReset()),200)}function initializeCard(){cardTimes(),cardRefreshTimes()}let year,month,week,date,dates,weekStr,monthStr,asideTime,asideDay,asideDayNum,animalYear,ganzhiYear,lunarMon,lunarDay;CURSOR=new Cursor,document.addEventListener("DOMContentLoaded",(()=>{initializeCard()})),document.addEventListener("pjax:complete",(()=>{initializeCard()}));const now=new Date;function cardRefreshTimes(){const e=document.getElementById("card-widget-schedule");e&&(asideDay=(now-asideTime)/1e3/60/60/24,e.querySelector("#pBar_year").value=asideDay,e.querySelector("#p_span_year").innerHTML=(asideDay/365*100).toFixed(1)+"%",e.querySelector(".schedule-r0 .schedule-d1 .aside-span2").innerHTML=`还剩<a> ${(365-asideDay).toFixed(0)} </a>天`,e.querySelector("#pBar_month").value=date,e.querySelector("#pBar_month").max=dates,e.querySelector("#p_span_month").innerHTML=(date/dates*100).toFixed(1)+"%",e.querySelector(".schedule-r1 .schedule-d1 .aside-span2").innerHTML=`还剩<a> ${dates-date} </a>天`,e.querySelector("#pBar_week").value=0===week?7:week,e.querySelector("#p_span_week").innerHTML=((0===week?7:week)/7*100).toFixed(1)+"%",e.querySelector(".schedule-r2 .schedule-d1 .aside-span2").innerHTML=`还剩<a> ${7-(0===week?7:week)} </a>天`)}function cardTimes(){year=now.getFullYear(),month=now.getMonth(),week=now.getDay(),date=now.getDate();const e=document.getElementById("card-widget-calendar");if(e){weekStr=["周日","周一","周二","周三","周四","周五","周六"][week];const t=[{month:"1月",days:31},{month:"2月",days:year%4==0&&year%100!=0||year%400==0?29:28},{month:"3月",days:31},{month:"4月",days:30},{month:"5月",days:31},{month:"6月",days:30},{month:"7月",days:31},{month:"8月",days:31},{month:"9月",days:30},{month:"10月",days:31},{month:"11月",days:30},{month:"12月",days:31}];monthStr=t[month].month,dates=t[month].days;const o=(week+8-date%7)%7;let s="",n=!1,a=7-o;const r=(dates-a)%7==0?Math.floor((dates-a)/7)+1:Math.floor((dates-a)/7)+2,i=e.querySelector("#calendar-main");e.querySelector("#calendar-date").style.fontSize=["64px","48px","36px"][Math.min(r-3,2)];for(let e=0;e<r;e++){i.querySelector(`.calendar-r${e}`)||(i.innerHTML+=`<div class='calendar-r${e}'></div>`);for(let t=0;t<7;t++){0===e&&t===o&&(s=1,n=!0);const a=s===date?" class='now'":"";i.querySelector(`.calendar-r${e} .calendar-d${t} a`)||(i.querySelector(`.calendar-r${e}`).innerHTML+=`<div class='calendar-d${t}'><a${a}>${s}</a></div>`),s>=dates&&(s="",n=!1),n&&(s+=1)}}const d=chineseLunar.solarToLunar(new Date(year,month,date));animalYear=chineseLunar.format(d,"A"),ganzhiYear=chineseLunar.format(d,"T").slice(0,-1),lunarMon=chineseLunar.format(d,"M"),lunarDay=chineseLunar.format(d,"d");const c=new Date("2025/05/01 00:00:00"),u=Math.floor((c-now)/1e3/60/60/24);asideTime=new Date(`${(new Date).getFullYear()}/01/01 00:00:00`),asideDay=(now-asideTime)/1e3/60/60/24,asideDayNum=Math.floor(asideDay);const l=week-asideDayNum%7>=0?Math.ceil(asideDayNum/7):Math.ceil(asideDayNum/7)+1;e.querySelector("#calendar-week").innerHTML=`第${l}周&nbsp;${weekStr}`,e.querySelector("#calendar-date").innerHTML=date.toString().padStart(2,"0"),e.querySelector("#calendar-solar").innerHTML=`${year}年${monthStr}&nbsp;第${asideDay.toFixed(0)}天`,e.querySelector("#calendar-lunar").innerHTML=`${ganzhiYear}${animalYear}年&nbsp;${lunarMon}${lunarDay}`,document.getElementById("schedule-days").innerHTML=u}}